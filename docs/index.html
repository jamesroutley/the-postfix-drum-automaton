<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap"
			rel="stylesheet"
		/>

		<link rel="icon" type="image/x-icon" href="/favicon.ico" />

		
		<link href="./_app/immutable/assets/0.Ck2ErHbC.css" rel="stylesheet">
		<link href="./_app/immutable/assets/2.B0mwtlKR.css" rel="stylesheet">
		<link rel="modulepreload" href="./_app/immutable/entry/start.D3jXWl-2.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/CK9uiqA4.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Cr8PO9SA.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/o6Tvb8KZ.js">
		<link rel="modulepreload" href="./_app/immutable/entry/app.B0RrbFx2.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/DsnmJJEf.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/Cj_3APbD.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/0.BBrQss76.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/2.CIWm9r3B.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/DdhAtVfc.js">
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><!----><div class="main-container svelte-1uha8ag"><h1 class="svelte-1uha8ag">The postfix drum automaton</h1> <p>An experimental programmable drum machine</p> <div class="controls svelte-1uha8ag"><button class="svelte-1uha8ag">Play</button> <label class="bpm-control svelte-1uha8ag">BPM: <input type="number" value="120" min="30" max="200" step="1" class="svelte-1uha8ag"/></label></div> <div class="patterns svelte-1uha8ag"><div class="pattern-row svelte-1uha8ag"><div class="pattern-input-row svelte-1uha8ag"><label for="kick-pattern" class="svelte-1uha8ag">Kck</label> <input id="kick-pattern" type="text" value="4n 1" placeholder="Enter kick pattern" aria-describedby="kick-error" aria-invalid="false" class="svelte-1uha8ag"/></div> <!--[!--><!--]--></div> <div class="pattern-row svelte-1uha8ag"><div class="pattern-input-row svelte-1uha8ag"><label for="snare-pattern" class="svelte-1uha8ag">Snr</label> <input id="snare-pattern" type="text" value="4n 2 mod 0 =" placeholder="Enter snare pattern" aria-describedby="snare-error" aria-invalid="false" class="svelte-1uha8ag"/></div> <!--[!--><!--]--></div> <div class="pattern-row svelte-1uha8ag"><div class="pattern-input-row svelte-1uha8ag"><label for="clap-pattern" class="svelte-1uha8ag">Clp</label> <input id="clap-pattern" type="text" value="16n 16 mod 0 =" placeholder="Enter clap pattern" aria-describedby="clap-error" aria-invalid="false" class="svelte-1uha8ag"/></div> <!--[!--><!--]--></div> <div class="pattern-row svelte-1uha8ag"><div class="pattern-input-row svelte-1uha8ag"><label for="closed-hihat-pattern" class="svelte-1uha8ag">CHH</label> <input id="closed-hihat-pattern" type="text" value="" placeholder="Enter closed hihat pattern" aria-describedby="closed-hihat-error" aria-invalid="false" class="svelte-1uha8ag"/></div> <!--[!--><!--]--></div> <div class="pattern-row svelte-1uha8ag"><div class="pattern-input-row svelte-1uha8ag"><label for="open-hihat-pattern" class="svelte-1uha8ag">OHH</label> <input id="open-hihat-pattern" type="text" value="8n 2 mod 0 = 0.6 *" placeholder="Enter open hihat pattern" aria-describedby="open-hihat-error" aria-invalid="false" class="svelte-1uha8ag"/></div> <!--[!--><!--]--></div> <div class="pattern-row svelte-1uha8ag"><div class="pattern-input-row svelte-1uha8ag"><label for="tom-pattern" class="svelte-1uha8ag">Tom</label> <input id="tom-pattern" type="text" value="" placeholder="Enter tom pattern" aria-describedby="tom-error" aria-invalid="false" class="svelte-1uha8ag"/></div> <!--[!--><!--]--></div> <div class="pattern-row svelte-1uha8ag"><div class="pattern-input-row svelte-1uha8ag"><label for="cymbal-pattern" class="svelte-1uha8ag">Cym</label> <input id="cymbal-pattern" type="text" value="" placeholder="Enter cymbal pattern" aria-describedby="cymbal-error" aria-invalid="false" class="svelte-1uha8ag"/></div> <!--[!--><!--]--></div> <div class="pattern-row svelte-1uha8ag"><div class="pattern-input-row svelte-1uha8ag"><label for="wildcard-pattern" class="svelte-1uha8ag">Wld</label> <input id="wildcard-pattern" type="text" value="" placeholder="Enter wildcard pattern" aria-describedby="wildcard-error" aria-invalid="false" class="svelte-1uha8ag"/></div> <!--[!--><!--]--></div></div> <h2 class="svelte-1uha8ag">Programming the machine</h2> <div><h3 class="svelte-1uha8ag">Language syntax</h3> <p>Each of the eight tracks is programmed using a custom <a href="https://en.wikipedia.org/wiki/Stack-oriented_programming">stack-oriented</a> programming language. The language operates over a Stack of numbers. A Stack is a data type which
			you can add to the top of ('push'), and remove from the top of ('pop').</p> <p>To evaluate a program, the interpreter executes each word in the program in order:</p> <ul><li>Numbers are pushed to the stack.</li> <li>Operations are executed and can pop zero or more numbers from the stack. The result of the
				operation is pushed to the stack.</li> <li><code class="svelte-1uha8ag">return</code> stops the program executing.</li> <li><code class="svelte-1uha8ag">if &lt;expression> then</code> only executes <code class="svelte-1uha8ag">&lt;expression></code> if the number on top of the stack is non-zero.</li></ul> <details><summary>An example [click to expand]</summary> <p>Given the initial stack <code class="svelte-1uha8ag">[]</code> and the program <code class="svelte-1uha8ag">1 2 +</code>, the interpreter
				would execute the following steps:</p> <ol><li>Push 1 to the stack: <code class="svelte-1uha8ag">[1]</code></li> <li>Push 2 to the stack: <code class="svelte-1uha8ag">[1, 2]</code></li> <li>Execute the <code class="svelte-1uha8ag">+</code> operation, which pops two numbers from the stack and pushes the
					sum: <code class="svelte-1uha8ag">[3]</code></li></ol></details> <details><summary>A more complicated example [click to expand]</summary> <p>Given the initial stack <code class="svelte-1uha8ag">[]</code> and the program <code class="svelte-1uha8ag">1 if 0 return then 2</code>, the interpreter would execute the following steps:</p> <ol><li>Push 1 to the stack: <code class="svelte-1uha8ag">[1]</code></li> <li>Execute the <code class="svelte-1uha8ag">if</code> operation, which pops the top number from the stack and checks
					if it is non-zero. Since it is, the interpreter runs the code up to the <code class="svelte-1uha8ag">then</code> block: <code class="svelte-1uha8ag">0 return</code>. This pushes 0 to the stack and exits: <code class="svelte-1uha8ag">[0]</code></li> <li>Since we've returned early, the code after the <code class="svelte-1uha8ag">then</code> block is not executed, so
					2 isn't pushed to the stack.</li></ol></details></div> <div><h3 class="svelte-1uha8ag">The drum machine</h3> <p>Internally, the drum machine has a clock, which increments 24 times per beat. The number of
			beats per minute (BPM) is configurable.</p> <p>On each increment, each track's program is called, with the current clock value passed as the
			only item on the stack.</p> <p>24 times per beat is too fast for most music, so the built in operations <code class="svelte-1uha8ag">4n</code> and <code class="svelte-1uha8ag">8n</code>, and <code class="svelte-1uha8ag">16n</code> are provided, which return early unless the current clock
			value is for a quarter note, eighth note, or sixteenth note. Most patterms will start with one
			of these operations.</p></div> <div><h3 class="svelte-1uha8ag">Built-in Operations</h3> <p>These operations are built into the interpreter itself.</p> <table class="svelte-1uha8ag"><thead><tr><th class="svelte-1uha8ag">Op</th><th class="svelte-1uha8ag">Description</th></tr></thead><tbody><!--[--><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">+</code></td><td class="svelte-1uha8ag">Adds two numbers</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">-</code></td><td class="svelte-1uha8ag">Subtracts the number on the top of the stack from the number below it</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">*</code></td><td class="svelte-1uha8ag">Multiplies two numbers</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">/</code></td><td class="svelte-1uha8ag">Divides the number on the top of the stack by the number below it</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">=</code></td><td class="svelte-1uha8ag">Returns 1 if the two numbers are equal, 0 otherwise</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">!=</code></td><td class="svelte-1uha8ag">Returns 1 if the two numbers are not equal, 0 otherwise</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">&lt;</code></td><td class="svelte-1uha8ag">Returns 1 if the number on the top of the stack is less than the number below it, 0 otherwise</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">></code></td><td class="svelte-1uha8ag">Returns 1 if the number on the top of the stack is greater than the number below it, 0 otherwise</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">mod</code></td><td class="svelte-1uha8ag">Returns the remainder of the division of the number on the top of the stack by the number below it</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">rnd</code></td><td class="svelte-1uha8ag">Returns a random number between 0 and 1</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">rrng</code></td><td class="svelte-1uha8ag">Returns a random number between the two numbers on the stack</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">dup</code></td><td class="svelte-1uha8ag">Duplicates the number on the top of the stack</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">swap</code></td><td class="svelte-1uha8ag">Swaps the two numbers on the stack</td></tr><tr><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">drop</code></td><td class="svelte-1uha8ag">Removes the number on the top of the stack</td></tr><!--]--></tbody></table></div> <div><h3 class="svelte-1uha8ag">Custom Operations</h3> <p>These operations are defined in the language itself, and can be used in patterns. You can
			define your own.</p> <table class="svelte-1uha8ag"><thead><tr><th class="svelte-1uha8ag">Name</th><th class="svelte-1uha8ag">Body</th><th class="svelte-1uha8ag"></th></tr></thead><tbody><!--[--><tr><td class="svelte-1uha8ag">4n</td><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">dup 24 mod 1 != if drop 0 return then 1 - 24 / 1 +</code></td><td class="remove-btn-cell svelte-1uha8ag"><!--[!--><!--]--></td></tr><tr><td class="svelte-1uha8ag">8n</td><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">dup 12 mod 1 != if drop 0 return then 1 - 12 / 1 +</code></td><td class="remove-btn-cell svelte-1uha8ag"><!--[!--><!--]--></td></tr><tr><td class="svelte-1uha8ag">16n</td><td class="svelte-1uha8ag"><code class="svelte-1uha8ag">dup 6 mod 1 != if drop 0 return then 1 - 6 / 1 +</code></td><td class="remove-btn-cell svelte-1uha8ag"><!--[!--><!--]--></td></tr><!--]--></tbody></table> <div class="custom-ops-container"><div class="custom-ops-controls svelte-1uha8ag"><button class="svelte-1uha8ag">Add custom operation</button></div> <!--[!--><!--]--></div></div></div><!----><!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_5sw7w = {
						base: new URL(".", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("./_app/immutable/entry/start.D3jXWl-2.js"),
						import("./_app/immutable/entry/app.B0RrbFx2.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
